(()=>{"use strict";const t=()=>{};function e(t){return void 0===t?[]:Array.isArray(t)?t:[t]}function n(t){return t.length>1?t:t[0]}function o(t){return null==t?[]:"string"!=typeof t&&"function"==typeof t[Symbol.iterator]?Array.from(t):[t]}function r(t){return null!=t&&"function"==typeof t.then}const i="",s=Symbol.for("crank.Portal"),c=Symbol.for("crank.Copy"),f=Symbol.for("crank.Raw"),l=Symbol.for("crank.Element");class a{constructor(t,e,n,o){this.$$typeof=l,this._f=0,this.tag=t,this.props=e,this.key=n,this.ref=o,this._ch=void 0,this._n=void 0,this._ctx=void 0}}function _(t){return null!=t&&t.$$typeof===l}function p(t,e,...n){let o,r;const i={};if(null!=e)for(const t in e)"crank-key"===t?null!=e["crank-key"]&&(o=e["crank-key"]):"crank-ref"===t?"function"==typeof e["crank-ref"]&&(r=e["crank-ref"]):i[t]=e[t];return n.length>1?i.children=n:1===n.length&&(i.children=n[0]),new a(t,i,o,r)}function u(t){if("boolean"!=typeof t&&null!=t)return"string"==typeof t||_(t)?t:"function"==typeof t[Symbol.iterator]?p(i,null,t):t.toString()}function h(t){const e=[];let n;for(let o=0;o<t.length;o++){const r=t[o];if(r)if("string"==typeof r)n=(n||"")+r;else if(Array.isArray(r))for(let t=0;t<r.length;t++){const o=r[t];o&&("string"==typeof o?n=(n||"")+o:(n&&(e.push(n),n=void 0),e.push(o)))}else n&&(e.push(n),n=void 0),e.push(r)}return n&&e.push(n),e}function d(t){return t._fb?"object"==typeof t._fb?d(t._fb):t._fb:t.tag!==s?"function"!=typeof t.tag&&t.tag!==i?t._n:n(y(t)):void 0}function y(t){const n=[],o=e(t._ch);for(let t=0;t<o.length;t++){const e=o[t];e&&n.push("string"==typeof e?e:d(e))}return h(n)}function v(e,n,o,l,p,u,h){let y;return"object"==typeof u&&"object"==typeof h&&u.tag===h.tag?(u.tag===s&&u.props.root!==h.props.root&&e.arrange(u,u.props.root,[]),u!==h&&(u.props=h.props,u.ref=h.ref,h=u),y=b(e,n,o,l,p,h)):"object"==typeof h?h.tag===c?(y="object"==typeof u?u._inf||d(u):u,"function"==typeof h.ref&&(r(y)?y.then(h.ref).catch(t):h.ref(y)),h=u):(1&h._f&&(h=function(t){if(!_(t))throw new TypeError("Cannot clone non-element");return new a(t.tag,{...t.props},t.key,t.ref)}(h)),y=function(t,e,n,o,r,c){return c._f|=1,"function"==typeof c.tag?(c._ctx=new P(t,e,n,o,r,c),N(c._ctx)):c.tag===f?k(t,r,c,[]):(c.tag!==i&&(c.tag===s&&(e=c.props.root),n=c,r=t.scope(n,r)),g(t,e,n,o,r,c,c.props.children))}(e,n,o,l,p,h),r(y)&&(h._fb=u)):"string"==typeof h&&(y=e.escape(h,p)),[h,y]}function g(t,e,i,s,c,f,l){const a=o(l),_=[];let p,d=!1;for(let n=0;n<a.length;n++){let o,f=u(a[n]);"object"==typeof f&&void 0!==f.key&&(void 0===p?p=new Set:p.has(f.key)&&console.error("Duplicate key",f.key),p.add(f.key)),[f,o]=v(t,e,i,s,c,void 0,f),a[n]=f,_.push(o),!d&&r(o)&&(d=!0)}if(f._ch=n(a),d){let e;const n=Promise.race([Promise.all(_),new Promise((t=>e=t))]);return f._onv&&f._onv(n),f._onv=e,f._inf=n.then((e=>k(t,c,f,h(e)))),f._inf}return f._onv&&(f._onv(_),f._onv=void 0),k(t,c,f,h(_))}function b(t,e,n,o,r,c){return"function"==typeof c.tag?c._ctx?N(c._ctx):void 0:c.tag===f?k(t,r,c,[]):(c.tag!==i&&(n=c,r=t.scope(n,r),c.tag===s&&(e=c.props.root)),w(t,e,n,o,r,c,c.props.children))}function m(t){const e=new Map;for(let n=0;n<t.length;n++){const o=t[n];"object"==typeof o&&void 0!==o.key&&e.set(o.key,o)}return e}function w(t,i,s,c,f,l,a){if(void 0===l._ch)return g(t,i,s,c,f,l,a);const _=e(l._ch),p=o(a),d=[],y=[];let b,w,x=0,S=!1;for(let e=0;e<p.length;e++){let n,o=_[x],l=u(p[e]),a="object"==typeof o?o.key:void 0,h="object"==typeof l?l.key:void 0;if(void 0!==b&&b.has(h)&&(console.error("Duplicate key",h),h=void 0),a!==h)if(w||(w=m(_.slice(x))),void 0===h){for(;void 0!==o&&void 0!==a;)x++,o=_[x],a="object"==typeof o?o.key:void 0;x++}else o=w.get(h),void 0!==o&&w.delete(h),b||(b=new Set),b.add(h);else void 0!==w&&void 0!==h&&w.delete(h),x++;[l,n]=v(t,i,s,c,f,o,l),d.push(n),p[e]=l,!S&&r(n)&&(S=!0),"object"==typeof o&&o!==l&&y.push(o)}for(l._ch=n(p);x<_.length;x++){const t=_[x];"object"==typeof t&&void 0===t.key&&y.push(t)}if(void 0!==w&&w.size>0&&y.push(...w.values()),S){let e,n=Promise.all(d).finally((()=>{y.forEach((e=>E(t,s,c,e)))}));return n=Promise.race([n,new Promise((t=>e=t))]),l._onv&&l._onv(n),l._onv=e,l._inf=n.then((e=>k(t,f,l,h(e)))),l._inf}return y.forEach((e=>E(t,s,c,e))),l._onv&&(l._onv(d),l._onv=void 0),k(t,f,l,h(d))}function k(t,o,r,c){let l=n(c);return"function"==typeof r.tag?"object"==typeof r._ctx&&function(t,n){if(!(32&t._f)){if(void 0!==t._ls&&t._ls.length>0)for(const o of e(n))if(M(o))for(const e of t._ls)o.addEventListener(e.type,e.callback,e.options);if(!(1&t._f)){const o=$(t._pa,t._ho);if(void 0!==o&&o.length>0)for(let t=0;t<o.length;t++){const r=o[t];for(const t of e(n))M(t)&&t.addEventListener(r.type,r.callback,r.options)}const r=t._ho;2&r._f&&t._re.arrange(r,r.tag===s?r.props.root:r._n,y(r)),t._re.complete(t._rt)}if(t._f&=-2,t._ss&&t._ss.size>0){const e=Array.from(t._ss);t._ss.clear();const o=t._re.read(n);for(const t of e)t(o)}}}(r._ctx,l):r.tag===s?(2&r._f||(r._f|=2),t.arrange(r,r.props.root,c),t.complete(r.props.root),l=void 0):r.tag===f?("string"==typeof r.props.value?r._n=t.parse(r.props.value,o):r._n=r.props.value,l=r._n):r.tag!==i&&(2&r._f||(r._n=t.create(r,o),r._f|=2),t.patch(r,r._n),t.arrange(r,r._n,c),l=r._n),r.ref&&r.ref(t.read(l)),r._inf&&(r._inf=void 0),r._fb&&(r._fb=void 0),l}function E(t,n,o,c){if("function"==typeof c.tag)"object"==typeof c._ctx&&function(t){if(t._f|=32,z(t),t._cs){const e=t._re.read(d(t._el));for(const n of t._cs)n(e);t._cs=void 0}if(!(t._f&x)&&(t._f|=x,C(t),t._it&&"function"==typeof t._it.return)){let e;try{t._f|=2,e=t._it.return()}finally{t._f&=-3}r(e)&&e.catch((e=>H(t._pa,e)))}}(c._ctx),o=c._ctx;else if(c.tag===s)n=c,t.arrange(n,n.props.root,[]),t.complete(n.props.root);else if(c.tag!==i){if(M(c._n)){const t=$(o,n);if(void 0!==t&&t.length>0)for(let e=0;e<t.length;e++){const n=t[e];c._n.removeEventListener(n.type,n.callback,n.options)}}n=c,t.dispose(n,n._n)}const f=e(c._ch);for(let e=0;e<f.length;e++){const r=f[e];"object"==typeof r&&E(t,n,o,r)}}const x=16,S=128;class P{constructor(t,e,n,o,r,i){this._f=0,this._re=t,this._rt=e,this._ho=n,this._pa=o,this._sc=r,this._el=i}get props(){return this._el.props}get value(){return this._re.read(d(this._el))}*[Symbol.iterator](){for(;!(this._f&x);){if(4&this._f)throw new Error("Context iterated twice without a yield");if(this._f&S)throw new Error("Use for await…of in async generator components");this._f|=4,yield this._el.props}}async*[Symbol.asyncIterator](){do{if(4&this._f)throw new Error("Context iterated twice without a yield");if(64&this._f)throw new Error("Use for…of in sync generator components");if(this._f|=4,8&this._f)this._f&=-9;else if(await new Promise((t=>this._oa=t)),this._f&x)break;yield this._el.props}while(!(this._f&x))}refresh(){return 32&this._f?(console.error("Component is unmounted"),this._re.read(void 0)):2&this._f?(console.error("Component is already executing"),this._re.read(void 0)):(C(this),this._re.read(A(this)))}schedule(t){this._ss||(this._ss=new Set),this._ss.add(t)}cleanup(t){this._cs||(this._cs=new Set),this._cs.add(t)}consume(t){for(let e=this._pa;void 0!==e;e=e._pa)if(e._ps&&e._ps.has(t))return e._ps.get(t)}provide(t,e){this._ps||(this._ps=new Map),this._ps.set(t,e)}addEventListener(t,e,n){if(null==e)return;let o;this._ls||(this._ls=[]),n=I(n),o="object"==typeof e?()=>e.handleEvent.apply(e,arguments):e;const r={type:t,callback:o,listener:e,options:n};if(n.once){const t=this;r.callback=function(){return t._ls&&(t._ls=t._ls.filter((t=>r!==t)),0===t._ls.length&&(t._ls=void 0)),o.apply(this,arguments)}}if(!this._ls.some((t=>r.type===t.type&&r.listener===t.listener&&!r.options.capture==!t.options.capture))){this._ls.push(r);for(const t of y(this._el))M(t)&&t.addEventListener(r.type,r.callback,r.options)}}removeEventListener(t,e,n){if(null==e||!this._ls)return;const o=I(n),r=this._ls.findIndex((n=>n.type===t&&n.listener===e&&!n.options.capture==!o.capture));if(-1===r)return;const i=this._ls[r];this._ls.splice(r,1),0===this._ls.length&&(this._ls=void 0);for(const t of y(this._el))M(t)&&t.removeEventListener(i.type,i.callback,i.options)}dispatchEvent(t){const e=[];for(let t=this._pa;void 0!==t;t=t._pa)e.push(t);let n=!1;const o=t.stopImmediatePropagation;U(t,"stopImmediatePropagation",(()=>(n=!0,o.call(t)))),U(t,"target",this);try{U(t,"eventPhase",R);for(let o=e.length-1;o>=0;o--){const r=e[o];if(r._ls){U(t,"currentTarget",r);for(const e of r._ls)if(e.type===t.type&&e.options.capture&&(e.callback.call(this,t),n))return!0}if(t.cancelBubble)return!0}if(this._ls){U(t,"eventPhase",B),U(t,"currentTarget",this);for(const e of this._ls)if(e.type===t.type&&(e.callback.call(this,t),n))return!0;if(t.cancelBubble)return!0}if(t.bubbles){U(t,"eventPhase",D);for(const o of e){if(o._ls){U(t,"currentTarget",o);for(const e of o._ls)if(e.type===t.type&&!e.options.capture&&(e.callback.call(this,t),n))return!0}if(t.cancelBubble)return!0}}}catch(t){console.error(t)}finally{return U(t,"eventPhase",O),U(t,"currentTarget",null),!t.defaultPrevented}}}function j(e){const n=e._el;if(e._f&x)return[void 0,d(n)];const o=!e._it;try{if(e._f|=2,o){z(e);const t=n.tag.call(e,n.props);if(!function(t){return null!=t&&"function"==typeof t.next}(t)){if(r(t)){const n=t instanceof Promise?t:Promise.resolve(t);return[n,n.then((t=>L(e,t)))]}return[void 0,L(e,t)]}e._it=t}}finally{e._f&=-3}let i,s,c;i=e._el._inf?e._el._inf.then((t=>e._re.read(t)),(()=>e._re.read(void 0))):o?e._re.read(void 0):e._re.read(d(n));try{e._f|=2,s=e._it.next(i)}catch(t){throw e._f|=x,t}finally{e._f&=-3}if(r(s))return o&&(e._f|=S),[s,s.then((t=>{4&e._f||(e._f&=-9),e._f&=-5,t.done&&(e._f|=x);try{const n=L(e,t.value);return r(n)?n.catch((t=>F(e,t))):n}catch(t){return F(e,t)}}),(t=>{throw e._f|=x,t}))];o&&(e._f|=64),e._f&=-5,s.done&&(e._f|=x);try{c=L(e,s.value),r(c)&&(c=c.catch((t=>F(e,t))))}catch(t){c=F(e,t)}return r(c)?[c.catch(t),c]:[void 0,c]}function T(t){t._ib=t._eb,t._iv=t._ev,t._eb=void 0,t._ev=void 0,t._f&S&&!(t._f&x)&&A(t)}function A(t){if(t._ib){if(t._f&S)return t._iv;if(!t._eb){let e;t._eb=t._ib.then((()=>{try{const[n,o]=j(t);if(e(o),r(o)&&(t._el._inf=o),r(n))return n.catch((e=>{if(!(1&t._f))return H(t._pa,e)}))}catch(e){if(!(1&t._f))return H(t._pa,e)}})).finally((()=>T(t))),t._ev=new Promise((t=>e=t))}}else try{let[e,n]=j(t);return r(e)&&(t._ib=e.catch((e=>{if(!(1&t._f))return H(t._pa,e)})).finally((()=>T(t)))),r(n)&&(t._iv=n,t._el._inf=n),n}catch(e){if(!(1&t._f))return H(t._pa,e);throw e}return t._ev}function C(t){t._oa?(t._oa(),t._oa=void 0):t._f|=8}function N(t){return t._f|=1,C(t),A(t)}function L(t,e){return w(t._re,t._rt,t._ho,t,t._sc,t._el,u(e))}const O=0,R=1,B=2,D=3;function I(t){return"boolean"==typeof t?{capture:t}:null==t?{}:t}function M(t){return null!=t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener&&"function"==typeof t.dispatchEvent}function U(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!0})}function $(t,e){let n;for(;void 0!==t&&t._ho===e;)void 0!==t._ls&&(n=(n||[]).concat(t._ls)),t=t._pa;return n}function z(t){if(t._ls&&t._ls.length>0){for(const e of y(t._el))if(M(e))for(const{type:n,callback:o,options:r}of t._ls)e.removeEventListener(n,o,r);t._ls=void 0}}function F(t,e){if(t._f&x||!t._it||"function"!=typeof t._it.throw)throw e;let n;C(t);try{t._f|=2,n=t._it.throw(e)}catch(e){throw t._f|=x,e}finally{t._f&=-3}return r(n)?n.then((e=>(e.done&&(t._f|=x),L(t,e.value))),(e=>{throw t._f|=x,e})):(n.done&&(t._f|=x),L(t,n.value))}function H(t,e){if(void 0===t)throw e;let n;try{n=F(t,e)}catch(e){return H(t._pa,e)}return r(n)?n.catch((e=>H(t._pa,e))):n}const J="http://www.w3.org/2000/svg",X=new class extends class{constructor(){this._cache=new WeakMap}render(t,e,o){let i;if("object"==typeof e&&null!==e&&(i=this._cache.get(e)),void 0===i)i=p(s,{children:t,root:e}),i._ctx=o,"object"==typeof e&&null!==e&&null!=t&&this._cache.set(e,i);else{if(i._ctx!==o)throw new Error("Context mismatch");i.props={children:t,root:e},"object"==typeof e&&null!==e&&null==t&&this._cache.delete(e)}const c=b(this,e,i,o,void 0,i);if(r(c))return c.then((()=>{const t=this.read(n(y(i)));return null==e&&E(this,i,void 0,i),t}));const f=this.read(n(y(i)));return null==e&&E(this,i,void 0,i),f}read(t){return t}scope(t,e){return e}escape(t,e){return t}parse(t,e){return t}create(t,e){throw new Error("Not implemented")}patch(t,e){}arrange(t,e,n){}dispose(t,e){}complete(t){}}{render(t,e,n){if(null==e||"number"!=typeof e.nodeType)throw new TypeError("Render root is not a node. Received: "+JSON.stringify(e&&e.toString()));return super.render(t,e,n)}parse(t){if("function"==typeof document.createRange)return document.createRange().createContextualFragment(t);{const e=document.createDocumentFragment(),n=(new DOMParser).parseFromString(t,"text/html").body.childNodes;for(let t=0;t<n.length;t++)e.appendChild(n[t]);return e}}scope(t,e){switch(t.tag){case s:case"foreignObject":return;case"svg":return J;default:return e}}create(t,e){if("string"!=typeof t.tag)throw new Error("Unknown tag: "+t.tag.toString());return"svg"===t.tag&&(e=J),e?document.createElementNS(e,t.tag):document.createElement(t.tag)}patch(t,e){const n=e.namespaceURI===J;for(let o in t.props){let r=!1;const i=t.props[o];switch(o){case"children":break;case"style":{const t=e.style;if(null==t)e.setAttribute("style",i);else if(null==i)e.removeAttribute("style");else if("string"==typeof i)t.cssText=i;else for(const e in i){const n=i&&i[e];null==n?t.removeProperty(e):t.setProperty(e,n)}break}case"class":case"className":!0===i?e.setAttribute("class",""):i?n?e.setAttribute("class",i):e.className=i:e.removeAttribute("class");break;case"form":case"list":case"type":case"size":r=!0;default:null==i?e.removeAttribute(o):"function"==typeof i||"object"==typeof i?e[o]=i:r||n||!(o in e)?!0===i?e.setAttribute(o,""):!1===i?e.removeAttribute(o):e.setAttribute(o,i):e[o]=i}}}arrange(t,e,n){if(t.tag===s&&(null==e||"number"!=typeof e.nodeType))throw new TypeError("Portal root is not a node. Received: "+JSON.stringify(e&&e.toString()));if(!("innerHTML"in t.props)&&(0!==n.length||e.__cranky)){if(0===n.length)return void(e.textContent="");let t=e.firstChild,o=0;for(;null!==t&&o<n.length;){const r=n[o];if(t===r)t=t.nextSibling,o++;else if("string"==typeof r)t.nodeType===Node.TEXT_NODE?(t.nodeValue=r,t=t.nextSibling):e.insertBefore(document.createTextNode(r),t),o++;else if(t.nodeType===Node.TEXT_NODE){const n=t.nextSibling;e.removeChild(t),t=n}else if(e.insertBefore(r,t),o++,t!==n[o]){const n=t.nextSibling;e.removeChild(t),t=n}}for(;null!==t;){const n=t.nextSibling;e.removeChild(t),t=n}for(;o<n.length;o++){const t=n[o];e.appendChild("string"==typeof t?document.createTextNode(t):t)}n.length>0?e.__cranky=!0:e.__cranky&&(e.__cranky=!1)}}};var V=document.getElementById("app");V&&X.render(p((function(){return p("div",null,"Hello world")}),null),V)})();